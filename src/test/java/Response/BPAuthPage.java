package Response;

import org.junit.Test;
import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;


import java.awt.*;
import java.awt.datatransfer.StringSelection;
import java.awt.event.KeyEvent;
import java.util.List;

public class BPAuthPage {

    @Test
    public void AuthPage() throws InterruptedException, AWTException {
        WebDriver driver;
        WebDriverWait wait;
        System.setProperty("webdriver.chrome.driver", "C:\\Program Files\\chromedriver\\chromedriver.exe");
        driver = new ChromeDriver();
       // System.setProperty("webdriver.gecko.driver", "C:\\Program Files\\chromedriver\\geckodriver.exe");
       // driver = new FirefoxDriver();

        wait = new WebDriverWait(driver, 300);
        driver.manage().window().maximize();
      /*  driver.get("http://rumskapt241.open.ru/241/login");
        driver.findElement(By.xpath("//*[@id='UserName']")).sendKeys("9715225506");
        driver.findElement(By.xpath("//*[@id='Password']")).sendKeys("!Qwerty123");
        */
        driver.get("http://rumskapt273.open.ru/273/login");
        driver.findElement(By.xpath("//*[@id='UserName']")).sendKeys("7704800849");
        driver.findElement(By.xpath("//*[@id='Password']")).sendKeys("!Qwerty123");
        driver.findElement(By.xpath("//*[@id='widget0']/div//button")).click();

        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@class='toolbar']")));

        Thread.sleep(2000);
        driver.switchTo().frame(driver.findElement(By.xpath("//*/div/iframe")));
        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@id='widget0']/div/div[2]/div/div[3]/div[2]/div/div[1]")));
        driver.findElement(By.xpath("//*[@id='widget0']/div/div[2]/div/div[3]/div[2]/div/div[1]")).click();
        driver.switchTo().defaultContent();

        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@class='link-add']")));
        driver.findElement(By.xpath("//*[@class='link-add']")).click();
        Thread.sleep(1000);

        driver.findElement(By.xpath("//*[@id='surname']")).sendKeys("Понамарев");
        driver.findElement(By.xpath("//*[@id='name']")).sendKeys("Михаил");
        driver.findElement(By.xpath("//*[@id='midname']")).sendKeys("Викторович");
        driver.findElement(By.xpath("//*[@id='position']")).sendKeys("Тестировщик");
        driver.findElement(By.xpath("//*[@id='email']")).sendKeys("ponomarev.mv@OPEN.RU");
        driver.findElement(By.xpath("//*[@id='phone']")).sendKeys("9168140318");


        List<WebElement> weList = driver.findElements(By.xpath("//*[@class='filepicker dropzone dz-clickable']"));
        Robot robot = new Robot();
        StringSelection ss = new StringSelection("C:\\Users\\ponomarev_mv\\Desktop\\1.jpg");
        Toolkit.getDefaultToolkit().getSystemClipboard().setContents(ss, null);

        for (WebElement node: weList) {

            Thread.sleep(3000);
       //     System.out.println(node.getAttribute("outerHTML"));

            node.click();

            Thread.sleep(2000);

            robot.delay(2000);
            robot.keyPress(KeyEvent.VK_CONTROL);
            robot.keyPress(KeyEvent.VK_V);
            robot.delay(2000);
            robot.keyRelease(KeyEvent.VK_V);
            robot.keyRelease(KeyEvent.VK_CONTROL);
            robot.delay(2000);
            robot.keyPress(KeyEvent.VK_ENTER);
            robot.keyRelease(KeyEvent.VK_ENTER);
            robot.delay(2000);

            Thread.sleep(3000);
            driver.switchTo().defaultContent();
            driver.switchTo().activeElement();
            Thread.sleep(1000);
            ((JavascriptExecutor)driver).executeScript("arguments[0].scrollIntoView();"
                    ,driver.findElement(By.xpath("//*[@class='btn-container link-btn__active label-as-text']")));
        }

        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@class='input-container__button input-container__button_files input-container__ok input-container_required_false']")));
        Thread.sleep(1000);
        driver.findElement(By.xpath("//*[@class='btn-container primary-btn__active label-as-text']")).click();
        driver.findElement(By.xpath("//*[text()='Документы']")).click();


        List<WebElement> weList2 = driver.findElements(By.xpath("//*[@class='step__checkbox step__checkbox_false']"));

        for (WebElement node2: weList2) {

            node2.click();
            Thread.sleep(1000);
        }

        driver.findElement(By.xpath("//*[text()='Анкета-заявка']")).click();
        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[text()='Общие сведения']")));
        driver.findElement(By.xpath("//*[text()='Общие сведения']")).click();
        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@class='step__checkbox step__checkbox_false']")));
        driver.findElement(By.xpath("//*[@class='step__checkbox step__checkbox_false']")).click();
        driver.findElement(By.xpath("//*[@id='organisationPhone']")).sendKeys("9168140318");
        driver.findElement(By.xpath("//*[@id='organisationEmail']")).sendKeys("ponomarev.mv@OPEN.RU");

        List<WebElement> weList3 = driver.findElements(By.xpath("//*[@class='btn-container primary-tab-btn label-as-number']"));

        for (WebElement node3: weList3) {

            node3.click();
            Thread.sleep(1000);
        }

        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[text()='Сведения об органах юридического лица']")));
        ((JavascriptExecutor)driver).executeScript("arguments[0].scrollIntoView();"
                ,driver.findElement(By.xpath("(//*[@class='application-collapse_false'])[1]")));
        driver.findElement(By.xpath("(//*[@class='application-collapse_false'])[1]")).click();
        wait.until(ExpectedConditions.presenceOfElementLocated(By.xpath("//*[@id='react-select-2--value']/div[1]")));


        By by = By.xpath("//*[@id='react-select-2--value']/div[1]/span[@class='select2-input' and contains(@id,'id_autogen')]");
        Actions actions = new Actions(driver);
        WebElement elem = driver.findElement(by);
        actions.moveToElement(elem);
        actions.perform();
        actions.click();



        List<WebElement> weList4 = driver.findElements(By.xpath("//*[@class='input-ui']/input"));

        for (WebElement node4: weList4) {

            node4.sendKeys("11");
            Thread.sleep(1000);
        }

        driver.findElement(By.xpath("//*[@id='proportion']")).sendKeys("50");

    }
}
